{% extends "t2/base.html" %}

{% block title %}Keine Tickets verf√ºgbar{% endblock %}

{% block content %}
<!-- Page Header -->
<div class="glass rounded-3xl p-8 mb-8 text-center" data-aos="fade-up">
    <h1 class="text-4xl md:text-5xl font-bold text-white mb-3">
        <i data-lucide="ticket-x" class="inline w-10 h-10 mr-3"></i>
        Keine Tickets verf√ºgbar
    </h1>
    <p class="text-lg text-gray-300">
        Du hast diesen Monat alle Tickets aufgebraucht
    </p>
</div>

<!-- No Tickets Message -->
<div class="max-w-2xl mx-auto">

    <!-- Main Message Box -->
    <div class="glass rounded-3xl p-12 mb-8 text-center" data-aos="fade-up" data-aos-delay="100">

        <!-- Icon -->
        <div class="text-9xl mb-8">üé´</div>

        <!-- Message -->
        <h2 class="text-3xl font-bold text-white mb-6">
            Alle Tickets aufgebraucht
        </h2>

        <p class="text-xl text-gray-300 leading-relaxed mb-10">
            Du hast diesen Monat bereits alle {{ tickets_total }} T2-Tickets verwendet.
        </p>

        <!-- Ticket Counter -->
        <div class="glass rounded-2xl p-8 mb-8 border-2 border-error/30">
            <div class="text-6xl font-bold text-error mb-3">
                {{ tickets_remaining }} / {{ tickets_total }}
            </div>
            <div class="text-gray-300 text-lg">
                Verf√ºgbare Tickets
            </div>
        </div>

        <!-- Reset Info -->
        <div class="glass rounded-2xl p-6 border-2 border-info/30">
            <div class="flex items-center justify-center gap-3 text-white font-bold text-xl mb-3">
                <i data-lucide="calendar-clock" class="w-6 h-6 text-info"></i>
                N√§chster Reset
            </div>
            <div class="text-gray-300 text-lg mb-2">
                {{ reset_date }}
            </div>
            <div class="text-gray-400 text-base">
                Dann erh√§ltst du wieder {{ tickets_total }} neue Tickets
            </div>
        </div>
    </div>

    <!-- What you can do -->
    <div class="glass rounded-3xl p-8 mb-8" data-aos="fade-up" data-aos-delay="200">
        <h3 class="text-2xl font-bold text-white mb-6">
            Was du jetzt tun kannst
        </h3>

        <div class="space-y-4">
            <!-- View Calendar -->
            <a href="{{ url_for('t2.calendar_view') }}" class="glass rounded-2xl p-5 flex items-center gap-4 hover:bg-white/10 transition-all group">
                <div class="text-5xl">üìÖ</div>
                <div class="flex-1">
                    <div class="text-white font-bold text-lg mb-1 group-hover:text-t2-purple transition-colors">Deine Termine ansehen</div>
                    <div class="text-gray-400 text-base">√úberblick √ºber gebuchte T2-Termine</div>
                </div>
                <i data-lucide="chevron-right" class="w-6 h-6 text-gray-400 group-hover:text-t2-purple group-hover:translate-x-1 transition-all"></i>
            </a>

            <!-- View Stats -->
            <a href="{{ url_for('t2.stats_page') }}" class="glass rounded-2xl p-5 flex items-center gap-4 hover:bg-white/10 transition-all group">
                <div class="text-5xl">üìä</div>
                <div class="flex-1">
                    <div class="text-white font-bold text-lg mb-1 group-hover:text-t2-purple transition-colors">Statistiken ansehen</div>
                    <div class="text-gray-400 text-base">Deine T2-Performance im √úberblick</div>
                </div>
                <i data-lucide="chevron-right" class="w-6 h-6 text-gray-400 group-hover:text-t2-purple group-hover:translate-x-1 transition-all"></i>
            </a>

            <!-- Back to Dashboard -->
            <a href="{{ url_for('t2.dashboard') }}" class="glass rounded-2xl p-5 flex items-center gap-4 hover:bg-white/10 transition-all group">
                <div class="text-5xl">üè†</div>
                <div class="flex-1">
                    <div class="text-white font-bold text-lg mb-1 group-hover:text-t2-purple transition-colors">Zur√ºck zum Dashboard</div>
                    <div class="text-gray-400 text-base">T2-Haupt√ºbersicht</div>
                </div>
                <i data-lucide="chevron-right" class="w-6 h-6 text-gray-400 group-hover:text-t2-purple group-hover:translate-x-1 transition-all"></i>
            </a>
        </div>
    </div>

    <!-- Countdown Timer -->
    <div class="glass rounded-3xl p-8 text-center" data-aos="fade-up" data-aos-delay="300">
        <div class="text-gray-300 text-lg mb-4">
            Zeit bis zum n√§chsten Reset
        </div>
        <div id="countdown" class="text-5xl font-bold text-t2-purple">
            <!-- Will be populated by JS -->
        </div>
    </div>

</div>
{% endblock %}

{% block extra_js %}
<script>
// Re-init Lucide icons
lucide.createIcons();

// Countdown to next month
function updateCountdown() {
    const now = new Date();
    const nextMonth = new Date(now.getFullYear(), now.getMonth() + 1, 1, 0, 0, 0);
    const diff = nextMonth - now;

    if (diff <= 0) {
        document.getElementById('countdown').textContent = 'Tickets werden gerade zur√ºckgesetzt...';
        setTimeout(() => location.reload(), 5000);
        return;
    }

    const days = Math.floor(diff / (1000 * 60 * 60 * 24));
    const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
    const seconds = Math.floor((diff % (1000 * 60)) / 1000);

    document.getElementById('countdown').textContent =
        `${days}d ${hours}h ${minutes}m ${seconds}s`;
}

document.addEventListener('DOMContentLoaded', function() {
    updateCountdown();
    setInterval(updateCountdown, 1000);
});
</script>
{% endblock %}
